'use strict';

Object.defineProperty(HTMLMediaElement.prototype, 'playing', {
  get: function(){
    return !!(this.currentTime > 0 && !this.paused && !this.ended && this.readyState > 2);
  }
});

function setupVideo() {
  // Display full screen when video is played
  window._wq = window._wq || [];
  _wq.push({ id: "_all", onReady: function(video) {
    video.bind("play", function(e) {
      $('.wistia__video').removeClass('wistia__video--playing');
      var playingVideo = $('#' + video._containerId).closest('.wistia__video');
      if (playingVideo) {
        $(playingVideo).addClass('wistia__video--hover');
      }
    });
  }});
  // If fullscreen button is clicked, do it.
  $('button.fullscreen').click(function() {
    var video = $(this).closest('.wistia__video').find('video')[0];
    if (video && video.playing) {
      if (video.requestFullscreen) {
        video.requestFullscreen();
      } else if (video.mozRequestFullScreen) {
        video.mozRequestFullScreen();
      } else if (video.webkitRequestFullscreen) {
        video.webkitRequestFullscreen();
      } else if (video.webkitEnterFullscreen) {
        video.webkitEnterFullscreen();
      }
    }
  });

  $('.tapVideoToPlay a').click(function(e) {
    e.preventDefault();
    var videoId = $(this).data('id');
    var video = Wistia.api(videoId);
    if (video) {
      if (video.state() === "playing") {
        video.pause();
      } else {
        video.play();
      }
    }
  });

  // Display full screen button only on hover
  $('.wistia__video').each(function(key, obj) {
    $(obj).mouseover(function() {
      var vid = $(obj).find('video')[0];
      if (vid && vid.playing) {
        $(obj).addClass('wistia__video--hover');
      }
    });
    $(obj).mouseout(function() {
      var vid = $(obj).find('video')[0];
      if (vid) {
        $(obj).removeClass('wistia__video--hover');
      }
    });
  });
}

$(document).ready(function() {
  setupVideo();
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlcyI6WyJzcmMvanMvYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIk9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3BsYXlpbmcnLCB7XG4gIGdldDogZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gISEodGhpcy5jdXJyZW50VGltZSA+IDAgJiYgIXRoaXMucGF1c2VkICYmICF0aGlzLmVuZGVkICYmIHRoaXMucmVhZHlTdGF0ZSA+IDIpO1xuICB9XG59KVxuXG5jb25zdCBnZXRVcmxWYXJzID0gKCkgPT4ge1xuICB2YXIgdmFycyA9IHt9XG4gIHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoL1s/Jl0rKFtePSZdKyk9KFteJl0qKS9naSwgKG0sa2V5LHZhbHVlKSA9PiB2YXJzW2tleV0gPSB2YWx1ZSlcbiAgcmV0dXJuIHZhcnNcbn1cblxuZnVuY3Rpb24gc2V0dXBWaWRlbygpIHtcbiAgLy8gRGlzcGxheSBmdWxsIHNjcmVlbiB3aGVuIHZpZGVvIGlzIHBsYXllZFxuICB3aW5kb3cuX3dxID0gd2luZG93Ll93cSB8fCBbXTtcbiAgX3dxLnB1c2goeyBpZDogXCJfYWxsXCIsIG9uUmVhZHk6IGZ1bmN0aW9uKHZpZGVvKSB7XG4gICAgdmlkZW8uYmluZChcInBsYXlcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgJCgnLndpc3RpYV9fdmlkZW8nKS5yZW1vdmVDbGFzcygnd2lzdGlhX192aWRlby0tcGxheWluZycpXG4gICAgICB2YXIgcGxheWluZ1ZpZGVvID0gJCgnIycgKyB2aWRlby5fY29udGFpbmVySWQpLmNsb3Nlc3QoJy53aXN0aWFfX3ZpZGVvJylcbiAgICAgIGlmIChwbGF5aW5nVmlkZW8pIHtcbiAgICAgICAgJChwbGF5aW5nVmlkZW8pLmFkZENsYXNzKCd3aXN0aWFfX3ZpZGVvLS1ob3ZlcicpXG4gICAgICB9XG4gICAgfSlcbiAgfX0pXG4gIC8vIElmIGZ1bGxzY3JlZW4gYnV0dG9uIGlzIGNsaWNrZWQsIGRvIGl0LlxuICAkKCdidXR0b24uZnVsbHNjcmVlbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgIHZhciB2aWRlbyA9ICQodGhpcykuY2xvc2VzdCgnLndpc3RpYV9fdmlkZW8nKS5maW5kKCd2aWRlbycpWzBdO1xuICAgIGlmICh2aWRlbyAmJiB2aWRlby5wbGF5aW5nKSB7XG4gICAgICBpZiAodmlkZW8ucmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICAgICAgdmlkZW8ucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgICAgIH0gZWxzZSBpZiAodmlkZW8ubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHtcbiAgICAgICAgdmlkZW8ubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTtcbiAgICAgIH0gZWxzZSBpZiAodmlkZW8ud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICAgICAgdmlkZW8ud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgICAgIH0gZWxzZSBpZiAodmlkZW8ud2Via2l0RW50ZXJGdWxsc2NyZWVuKSB7XG4gICAgICAgIHZpZGVvLndlYmtpdEVudGVyRnVsbHNjcmVlbigpO1xuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICAkKCcudGFwVmlkZW9Ub1BsYXkgYScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICB2YXIgdmlkZW9JZCA9ICQodGhpcykuZGF0YSgnaWQnKVxuICAgIHZhciB2aWRlbyA9IFdpc3RpYS5hcGkodmlkZW9JZClcbiAgICBpZiAodmlkZW8pIHtcbiAgICAgIGlmICh2aWRlby5zdGF0ZSgpID09PSBcInBsYXlpbmdcIikge1xuICAgICAgICB2aWRlby5wYXVzZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aWRlby5wbGF5KClcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLy8gRGlzcGxheSBmdWxsIHNjcmVlbiBidXR0b24gb25seSBvbiBob3ZlclxuICAkKCcud2lzdGlhX192aWRlbycpLmVhY2goZnVuY3Rpb24oa2V5LCBvYmopIHtcbiAgICAkKG9iaikubW91c2VvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHZpZCA9ICQob2JqKS5maW5kKCd2aWRlbycpWzBdXG4gICAgICBpZiAodmlkICYmIHZpZC5wbGF5aW5nKSB7XG4gICAgICAgICQob2JqKS5hZGRDbGFzcygnd2lzdGlhX192aWRlby0taG92ZXInKVxuICAgICAgfVxuICAgIH0pXG4gICAgJChvYmopLm1vdXNlb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHZpZCA9ICQob2JqKS5maW5kKCd2aWRlbycpWzBdXG4gICAgICBpZiAodmlkKSB7XG4gICAgICAgICQob2JqKS5yZW1vdmVDbGFzcygnd2lzdGlhX192aWRlby0taG92ZXInKVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG59XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICBzZXR1cFZpZGVvKClcbn0pIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFO0VBQzNELEdBQUcsRUFBRSxVQUFVO0lBQ2IsT0FBTyxDQUFDLEVBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDO0dBQ3ZGO0NBQ0YsRUFBQztBQUNGLEFBTUE7QUFDQSxTQUFTLFVBQVUsR0FBRzs7RUFFcEIsTUFBTSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQztFQUM5QixHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsU0FBUyxLQUFLLEVBQUU7SUFDOUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLEVBQUU7TUFD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
